# FoxThead的设计思路
foxthread的本质其实是一个事件驱动的工作线程，使用libevent事件库的eventLoop机制进行接收任务

## 1.内部线程thread行为及实现原理：
线程在没有任务的时候，进入EventLoop事件循环等待注册的事件就绪并执行回调函数，为了感知上层的任务派发foxthread内部开启了一个管道pipe，并注册管道的read事件由线程监听，当上层使用dispatch函数派发任务时，需要执行两个操作：

1. 将任务放入任务队列【可放入空任务表示需要stop线程】
2. 调用write接口向管道写数据，触发管道read事件就绪

后续，线程会跳出事件循环执行管道读事件的回调函数readcb，在readcb中的操作：

1. 读完管道中的数据
2. 置换出所有任务，然后将任务全部执行
3. 若存在空任务，说明上层想stop这个线程，此时打断事件循环，线程退出


